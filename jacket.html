<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Should I Wear a Jacket on Hawk Today?</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f0f8ff;
            color: #333;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        header {
            background-color: #4682b4;
            color: white;
            padding: 20px;
            text-align: center;
        }
        main {
            flex: 1;
            padding: 40px;
            text-align: center;
        }
        footer {
            background-color: #4682b4;
            color: white;
            padding: 10px;
            text-align: center;
        }
        h1 {
            font-size: 2em;
            margin-bottom: 20px;
        }
        .answer {
            font-size: 1.5em;
            color: #2e8b57;
        }
    </style>
</head>
<body>

<header>
    <h1>Should I Wear a Jacket Today on Hawk Hill?</h1>
</header>

<main>
    <p id="recommendation">Loading...</p>

    <script>
        // Decision function (mirrors your Python rules)
        function chooseOutfit(temp, wind, cloud, rain) {
            if (temp < 45) return "pants";
            if (temp < 50) return "jacket";
            if (temp < 55 && temp >= 50) {
                if (rain < 20 && cloud < 30 && wind < 15) return "long sleeve";
                else return "long";
            }
            if (temp > 60) return "short sleeve";
            if (temp > 55) {
                if (rain < 20 && cloud < 30 && wind < 15) return "short sleeve";
                else return "long";
            }
            return "long";
        }

        async function updateRecommendation() {
            try {
                // Fetch weather data from Open-Meteo
                const response = await fetch("https://api.open-meteo.com/v1/forecast?latitude=37.83&longitude=-122.48&hourly=temperature_2m,cloudcover,windspeed_10m,precipitation_probability");
                const data = await response.json();

                // Take min/max values as in your Python logic
                const tempsF = data.hourly.temperature_2m.map(tempC => tempC * 9 / 5 + 32);
                const clouds = data.hourly.cloudcover;
                const windsMph = data.hourly.windspeed_10m.map(speedKmh => speedKmh * 0.621371);
                const rains = data.hourly.precipitation_probability;

                const minTemp = Math.min(...tempsF);
                const minCloud = Math.min(...clouds);
                const maxWind = Math.max(...winds);
                const maxRain = Math.max(...rains);

                const outfit = chooseOutfit(minTemp, maxWind, minCloud, maxRain);
                document.getElementById("recommendation").innerText = `Recommended outfit: ${outfit}`;
            } catch (err) {
                console.error(err);
                document.getElementById("recommendation").innerText = "Error fetching weather data";
            }
        }

        // Initial call
        updateRecommendation();

        // Update every 20 minutes (20*60*1000 ms)
        setInterval(updateRecommendation, 20 * 60 * 1000);
    </script>
</main>

<footer>
    <p>2025</p>
</footer>

</body>
</html>

